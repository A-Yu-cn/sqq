# 通讯相关



### 开启长连接

- 客户端和服务器连接成功之后需要给服务器发送一条认证消息，格式如下:

  ```json
  {
  	"Authorizaiton": "0c67c52b12268a888948fda2174b2723329213a0a908fc7b07bc73fb947b1df5",
  }
  ```

- 在认证成功之后服务器会下发成功信息，否则会断开此连接

  ```
  {
  	"mes": "",
  	"data": 12345		//用户id
  }
  ```

  

### 消息传输格式

- 发给服务器的消息

```json
{
    "Authorizaiton": "0c67c52b12268a888948fda2174b2723329213a0a908fc7b07bc73fb947b1df5",
    "to": 12345, //用户id或聊天室id
    "content": "sss", //消息实体
  
}
```

- 服务器下发的消息

```json
{
    "from": 12345,    //发送消息的用户id
    "to": 12345,    //接受消息的用户id或者聊天室id
    "content": "消息实体",
    "time": "2021-03-17T11:48:14.944868+08:00"
}
```